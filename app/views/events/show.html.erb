<% provide(:title, @event.title) %>
<div class="row justify-content-center">
	<div class="col-sm-8">
    <section class="event border border-info rounded p-1 m-3">
  		<div class="row justify-content-between align-items-center p-3 border-bottom">
        <div class="col-sm-8">
          <h4 class="m-0"><%= @event.title.capitalize %></h4>
        </div>
        <div class="col-sm-4">
          <% if current_user && !current_user.appointments.include?(current_user.id) %>
            <%= form_for current_user.appointments.build do |f| %>
              <%#= f.hidden_field :attendee, value: current_user.id %>
              <%= f.hidden_field :attended_event_id, value: @event.id %>
              <%= f.submit "Attend Event", class: "form-control btn btn-outline-primary" %>
            <% end %>
          <% else current_user.appointments.include?(current_user.id) %>
            <%= form_for(current_user.appointments.find_by(attended_event_id: @event.id), :html => { method: :delete }) do |f| %>
  						<%= f.submit "Can't make it", class: "form-control btn btn-danger" %>
  					<% end %>
          <% end %>
        </div>
  		</div>
    	<div class="event-content p-3">
    		<p><%= @event.description %></p>
    		<p class="creator">Hosted by <%= @event.creator.name %></p>
        <i class="fa fa-fw fa-map-marker mr-3"></i><span><%= @event.location %></span>
        <br>
    		<i class="fa fa-fw fa-calendar-o mr-3"></i><span><%= "#{format_date(@event.date)} at #{format_time(@event.time)}"%> </span>
    	</div>
  	</section>

    <section class="event p-1 m-3">
      <h4 class="attending-head"><i class="fa fa-list mx-3"></i>Attendees</h4>
      <hr>
  		<% @attendees.each do |attendee| %>
  			<ul class="guest-list m-1" style="list-style:none">
  				<li>
            <i class="fa fa-user mr-3"></i><span><%= attendee.name %></span>
          </li>
  			</ul>
  		<% end %>
	  </section>
	</div>
</div>
